---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Breadcrumb from '../components/Breadcrumb.astro';

const title = "How to Buy Bitcoin Australia | Easy Guide for Beginners | Mullaways";
const description = "Complete beginner's guide to buying Bitcoin in Australia. Step-by-step instructions, best exchanges, Bitcoin ATM locations near you. Pay for cannabis with BTC easily.";

const schema = {
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Buy Bitcoin in Australia",
  "description": "A step-by-step guide for beginners to buy Bitcoin in Australia using exchanges or Bitcoin ATMs.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Choose an Exchange",
      "text": "Pick an AUSTRAC-registered Australian exchange like CoinSpot, CoinJar, or bitcoin.com.au."
    },
    {
      "@type": "HowToStep",
      "name": "Create Your Account",
      "text": "Sign up with your email address and verify your identity with a valid Australian ID."
    },
    {
      "@type": "HowToStep",
      "name": "Deposit AUD",
      "text": "Add funds via PayID, bank transfer, POLi, or debit card — most methods are instant."
    },
    {
      "@type": "HowToStep",
      "name": "Buy Bitcoin",
      "text": "Enter the amount you want to spend in AUD, confirm, and your Bitcoin is ready instantly."
    },
    {
      "@type": "HowToStep",
      "name": "Send to Our Wallet",
      "text": "Copy our Bitcoin address from checkout and send from your exchange — it's like pasting an email address."
    }
  ]
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://mullawaysmedicalcannabis.com.au/" },
    { "@type": "ListItem", "position": 2, "name": "How to Buy Bitcoin", "item": "https://mullawaysmedicalcannabis.com.au/buy-bitcoin" }
  ]
};

const cities = [
  { name: 'Sydney', state: 'NSW', slug: 'sydney', atms: 14, lat: -33.8688, lng: 151.2093, mapZoom: 12 },
  { name: 'Melbourne', state: 'VIC', slug: 'melbourne', atms: 13, lat: -37.8136, lng: 144.9631, mapZoom: 12 },
  { name: 'Brisbane', state: 'QLD', slug: 'brisbane', atms: 6, lat: -27.4698, lng: 153.0251, mapZoom: 12 },
  { name: 'Perth', state: 'WA', slug: 'perth', atms: 5, lat: -31.9505, lng: 115.8605, mapZoom: 12 },
  { name: 'Adelaide', state: 'SA', slug: 'adelaide', atms: 4, lat: -34.9285, lng: 138.6007, mapZoom: 12 },
  { name: 'Gold Coast', state: 'QLD', slug: 'gold-coast', atms: 3, lat: -28.0167, lng: 153.4, mapZoom: 12 },
  { name: 'Canberra', state: 'ACT', slug: 'canberra', atms: 2, lat: -35.2809, lng: 149.1300, mapZoom: 13 },
  { name: 'Newcastle', state: 'NSW', slug: 'newcastle', atms: 2, lat: -32.9283, lng: 151.7817, mapZoom: 13 },
  { name: 'Sunshine Coast', state: 'QLD', slug: 'sunshine-coast', atms: 1, lat: -26.6500, lng: 153.0667, mapZoom: 12 },
  { name: 'Hobart', state: 'TAS', slug: 'hobart', atms: 1, lat: -42.8821, lng: 147.3272, mapZoom: 13 },
  { name: 'Darwin', state: 'NT', slug: 'darwin', atms: 1, lat: -12.4634, lng: 130.8456, mapZoom: 13 },
  { name: 'Wollongong', state: 'NSW', slug: 'wollongong', atms: 1, lat: -34.4248, lng: 150.8931, mapZoom: 13 },
  { name: 'Central Coast', state: 'NSW', slug: 'central-coast', atms: 1, lat: -33.4200, lng: 151.3400, mapZoom: 13 },
];

const exchanges = [
  {
    name: 'CoinSpot',
    url: 'https://www.coinspot.com.au',
    founded: '2013',
    ease: 'Very Easy',
    easeScore: 5,
    fees: '1%',
    deposit: ['PayID', 'POLi', 'BPAY', 'Cash'],
    speed: 'Instant',
    minBuy: '$10',
    austrac: true,
    bestFor: 'Absolute beginners',
    description: 'Australia\'s most beginner-friendly exchange. Sign up, deposit via PayID, and buy Bitcoin in under 5 minutes.',
    highlight: true,
    color: '#1652F0',
  },
  {
    name: 'CoinJar',
    url: 'https://www.coinjar.com',
    founded: '2013',
    ease: 'Very Easy',
    easeScore: 5,
    fees: '0-2%',
    deposit: ['PayID', 'Osko', 'NPP'],
    speed: 'Instant',
    minBuy: '$10',
    austrac: true,
    bestFor: 'Quick mobile purchases',
    description: 'Clean interface perfect for first-time buyers. Instant bank transfers and a well-designed mobile app.',
    highlight: false,
    color: '#4361EE',
  },
  {
    name: 'bitcoin.com.au',
    url: 'https://bitcoin.com.au',
    founded: '2015',
    ease: 'Easy',
    easeScore: 4,
    fees: '~1%',
    deposit: ['PayPal', 'Card', 'Bank Transfer'],
    speed: 'Instant',
    minBuy: '$50',
    austrac: true,
    bestFor: 'PayPal users',
    description: 'Trusted by 300,000+ Australians. One of the few that accepts PayPal and credit/debit cards.',
    highlight: false,
    color: '#F7931A',
  },
  {
    name: 'Swyftx',
    url: 'https://swyftx.com',
    founded: '2017',
    ease: 'Easy',
    easeScore: 4,
    fees: '0.6%',
    deposit: ['PayID', 'POLi', 'Card'],
    speed: 'Instant',
    minBuy: '$30',
    austrac: true,
    bestFor: 'Low-fee purchases',
    description: 'Great guides and tutorials built in. Instant verification and fast chat support when you need help.',
    highlight: false,
    color: '#00C289',
  },
  {
    name: 'Independent Reserve',
    url: 'https://www.independentreserve.com',
    founded: '2013',
    ease: 'Moderate',
    easeScore: 3,
    fees: '0.5%',
    deposit: ['PayID', 'EFT', 'Osko'],
    speed: 'Same Day',
    minBuy: '$10',
    austrac: true,
    bestFor: 'Experienced traders',
    description: 'Australia\'s institutional-grade exchange. Lower fees, advanced trading tools, and SMSF support.',
    highlight: false,
    color: '#2962FF',
  },
  {
    name: 'BTC Markets',
    url: 'https://www.btcmarkets.net',
    founded: '2013',
    ease: 'Moderate',
    easeScore: 3,
    fees: '0.85%',
    deposit: ['PayID', 'EFT', 'BPAY'],
    speed: 'Same Day',
    minBuy: '$10',
    austrac: true,
    bestFor: 'Long-term holders',
    description: 'One of Australia\'s oldest exchanges. Trusted since 2013 with a strong reputation for security.',
    highlight: false,
    color: '#1B3A5C',
  },
];

const faqs = [
  {
    q: 'What do I need to buy Bitcoin in Australia?',
    a: 'Just an email address, an Australian bank account or card, and a valid ID (driver\'s licence or passport). The whole signup process takes 5-10 minutes on most exchanges.'
  },
  {
    q: 'Is it legal to buy Bitcoin in Australia?',
    a: 'Absolutely. Bitcoin is 100% legal in Australia. Australian exchanges are registered with AUSTRAC (Australian Transaction Reports and Analysis Centre). Buying, holding, and spending Bitcoin is completely legal.'
  },
  {
    q: 'How much Bitcoin do I need to buy?',
    a: 'You don\'t need to buy a whole Bitcoin! You can buy as little as $10 worth. Bitcoin is divisible to 8 decimal places (called "satoshis"). Just buy the amount you need for your order.'
  },
  {
    q: 'How long does it take to buy Bitcoin?',
    a: 'With exchanges like CoinSpot or CoinJar using PayID, you can buy Bitcoin in under 5 minutes from signing up. Bitcoin ATMs are even faster — insert cash and get Bitcoin in about 60 seconds.'
  },
  {
    q: 'What is a Bitcoin wallet?',
    a: 'A Bitcoin wallet is like a digital bank account for your Bitcoin. When you buy on an exchange, they provide a wallet automatically. To pay us, you just copy our Bitcoin address and paste it in the "Send" section of your exchange.'
  },
  {
    q: 'How do I send Bitcoin to pay for my order?',
    a: 'At checkout, you\'ll see our Bitcoin address and a QR code. Open your exchange app, tap "Send" or "Withdraw", paste our address (or scan the QR code), enter the amount, and confirm. That\'s it!'
  },
  {
    q: 'What fees are involved?',
    a: 'Exchange fees are typically 0.5-1% of your purchase. Bitcoin ATMs charge higher fees (5-10%) but require no account setup. Network fees (to send Bitcoin) are usually under $1.'
  },
  {
    q: 'Can I buy Bitcoin with cash?',
    a: 'Yes! Bitcoin ATMs accept cash and are available in most Australian cities. You can also use services like BuyaBitcoin that let you deposit cash at a bank and receive Bitcoin. See our ATM map below for locations near you.'
  },
  {
    q: 'What if I buy too much Bitcoin?',
    a: 'No problem — any Bitcoin left in your exchange account stays there for next time. You can also sell it back to AUD whenever you want.'
  },
  {
    q: 'Is Bitcoin anonymous?',
    a: 'Australian exchanges require identity verification (KYC). However, Bitcoin ATMs for small amounts (under $1,000) often only require a phone number. Bitcoin transactions themselves don\'t show your name on the blockchain.'
  },
];
---

<Layout title={title} description={description} schema={[schema, breadcrumbSchema]}>
  <Header />

  <Breadcrumb items={[{label: 'Home', href: '/'}, {label: 'How to Buy Bitcoin'}]} />

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-bg">
      <div class="hero-gradient"></div>
      <div class="hero-pattern"></div>
    </div>
    <div class="container">
      <div class="hero-content">
        <div class="hero-badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          <span>Beginner-Friendly Guide</span>
        </div>
        <h1>How to Buy Bitcoin <span class="text-gradient">in Australia</span></h1>
        <p class="hero-description">Never used crypto before? No problem. This guide will walk you through buying Bitcoin step-by-step — from zero knowledge to making your first payment in under 10 minutes.</p>
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="stat-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
            </span>
            <div>
              <span class="stat-value">5 min</span>
              <span class="stat-label">To Buy Bitcoin</span>
            </div>
          </div>
          <div class="hero-stat">
            <span class="stat-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
            </span>
            <div>
              <span class="stat-value">50+</span>
              <span class="stat-label">Bitcoin ATMs</span>
            </div>
          </div>
          <div class="hero-stat">
            <span class="stat-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            </span>
            <div>
              <span class="stat-value">100%</span>
              <span class="stat-label">Legal in Australia</span>
            </div>
          </div>
        </div>
        <div class="hero-ctas">
          <a href="#buy-online" class="btn btn-primary btn-large">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 3l-4 4-4-4"/></svg>
            Buy Online (Easiest)
          </a>
          <a href="#atm-map" class="btn btn-outline-light btn-large">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            Find a Bitcoin ATM
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Bitcoin Section -->
  <section class="section why-bitcoin">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Why Pay With Bitcoin?</span>
        <h2>Benefits of Bitcoin Payments</h2>
        <p>Bitcoin is the preferred payment method for cannabis purchases in Australia. Here's why thousands of customers choose it.</p>
      </div>
      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
          </div>
          <h3>Private & Discreet</h3>
          <p>No cannabis-related entries on your bank statement. Bitcoin payments keep your purchases completely private.</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
          </div>
          <h3>Faster Processing</h3>
          <p>Bitcoin payments are confirmed in minutes, not days. Your order ships sooner because there's no bank processing delay.</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
          </div>
          <h3>Lower Fees</h3>
          <p>No credit card surcharges or bank transfer delays. Bitcoin network fees are typically under $1 per transaction.</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <h3>Secure & Safe</h3>
          <p>Bitcoin uses military-grade encryption. Transactions can't be reversed or intercepted. Your money reaches us directly.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Buy Online Section -->
  <section class="section buy-online" id="buy-online">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Method 1 — Recommended</span>
        <h2>Buy Bitcoin Online <span class="text-accent">(5 Minutes)</span></h2>
        <p>The easiest way to get Bitcoin. Follow these 5 simple steps — no crypto knowledge required.</p>
      </div>

      <div class="steps-container">
        <div class="step-card">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Choose an Exchange</h3>
            <p>Pick one of the trusted Australian exchanges below. We recommend <a href="https://www.coinspot.com.au" target="_blank" rel="noopener noreferrer"><strong>CoinSpot</strong></a> for absolute beginners — it's the simplest.</p>
            <div class="step-tip">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
              <span>All recommended exchanges are registered with AUSTRAC (Australian government regulator)</span>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Create Your Account</h3>
            <p>Sign up with your email. You'll need to verify your identity with a <strong>driver's licence or passport</strong> — this is required by Australian law and keeps you safe.</p>
            <div class="step-tip">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
              <span>Verification is usually instant with <a href="https://www.coinspot.com.au" target="_blank" rel="noopener noreferrer">CoinSpot</a> & <a href="https://www.coinjar.com" target="_blank" rel="noopener noreferrer">CoinJar</a> — just take a photo of your ID</span>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Deposit AUD</h3>
            <p>Add money to your account. The fastest methods are:</p>
            <ul class="step-list">
              <li><strong>PayID / Osko</strong> — Instant, free (best option)</li>
              <li><strong>Bank Transfer</strong> — Free, takes 1-2 hours</li>
              <li><strong>Debit/Credit Card</strong> — Instant, small fee</li>
              <li><strong>PayPal</strong> — Instant (<a href="https://bitcoin.com.au" target="_blank" rel="noopener noreferrer">bitcoin.com.au</a> only)</li>
            </ul>
            <div class="step-tip">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
              <span>Only deposit the amount you need for your order — don't buy more than you need</span>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3>Buy Bitcoin</h3>
            <p>Click <strong>"Buy"</strong>, select <strong>"Bitcoin (BTC)"</strong>, type the dollar amount you want, and confirm. That's it — you now own Bitcoin!</p>
            <div class="step-visual">
              <div class="mock-ui">
                <div class="mock-header">Buy Bitcoin</div>
                <div class="mock-input">
                  <span class="mock-label">You pay</span>
                  <span class="mock-value">$150.00 <small>AUD</small></span>
                </div>
                <div class="mock-arrow">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                </div>
                <div class="mock-input">
                  <span class="mock-label">You receive</span>
                  <span class="mock-value mock-btc">≈ 0.00098 <small>BTC</small></span>
                </div>
                <div class="mock-btn">Confirm Purchase</div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">5</div>
          <div class="step-content">
            <h3>Send to Our Wallet</h3>
            <p>At checkout on our site, you'll see our <strong>Bitcoin address</strong> and <strong>QR code</strong>. In your exchange app:</p>
            <ol class="step-list numbered">
              <li>Tap <strong>"Send"</strong> or <strong>"Withdraw"</strong></li>
              <li>Paste our Bitcoin address (or scan QR code)</li>
              <li>Enter the payment amount</li>
              <li>Tap <strong>"Confirm"</strong></li>
            </ol>
            <div class="step-tip success">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
              <span>Done! We'll receive your payment and start processing your order. It's that simple.</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Exchanges Comparison -->
  <section class="section exchanges" id="exchanges">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Recommended Exchanges</span>
        <h2>Best Places to Buy Bitcoin <span class="text-accent">Online in Australia</span></h2>
        <p>All AUSTRAC-registered, trusted, and accept AUD. We've ranked them by ease of use for beginners. Click any exchange to visit their site directly.</p>
      </div>

      <div class="exchanges-grid">
        {exchanges.map((exchange) => (
          <a href={exchange.url} target="_blank" rel="noopener noreferrer" class={`exchange-card ${exchange.highlight ? 'recommended' : ''}`}>
            {exchange.highlight && <div class="exchange-badge">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
              Recommended
            </div>}

            <div class="exchange-top">
              <div class="exchange-icon" style={`background: ${exchange.color}15; border-color: ${exchange.color}30;`}>
                <span class="exchange-initial" style={`color: ${exchange.color};`}>{exchange.name.charAt(0)}</span>
              </div>
              <div class="exchange-title">
                <h3>{exchange.name}
                  <svg class="external-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                </h3>
                <span class="exchange-year">Est. {exchange.founded} &middot; AUSTRAC Registered</span>
              </div>
            </div>

            <p class="exchange-desc">{exchange.description}</p>

            <div class="exchange-stats">
              <div class="exchange-stat">
                <span class="stat-label">Fees</span>
                <span class="stat-value">{exchange.fees}</span>
              </div>
              <div class="exchange-stat">
                <span class="stat-label">Min. Buy</span>
                <span class="stat-value">{exchange.minBuy}</span>
              </div>
              <div class="exchange-stat">
                <span class="stat-label">Speed</span>
                <span class="stat-value accent">{exchange.speed}</span>
              </div>
              <div class="exchange-stat">
                <span class="stat-label">Ease</span>
                <div class="ease-dots">
                  {[1,2,3,4,5].map((i) => (
                    <span class={`ease-dot ${i <= exchange.easeScore ? 'active' : ''}`} style={i <= exchange.easeScore ? `background: ${exchange.color};` : ''}></span>
                  ))}
                </div>
              </div>
            </div>

            <div class="exchange-deposits">
              <span class="deposits-label">Accepts:</span>
              <div class="deposit-tags">
                {exchange.deposit.map((method: string) => (
                  <span class="deposit-tag">{method}</span>
                ))}
              </div>
            </div>

            <div class="exchange-footer">
              <span class="best-for-tag" style={`background: ${exchange.color}12; color: ${exchange.color}; border-color: ${exchange.color}25;`}>Best for: {exchange.bestFor}</span>
              <span class="visit-link">Visit {exchange.name}
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              </span>
            </div>
          </a>
        ))}
      </div>

      <div class="exchanges-note">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
        <p>We are not affiliated with any exchange. All links go directly to the official exchange websites. Always verify you're on the correct URL before entering any personal information.</p>
      </div>
    </div>
  </section>

  <!-- Bitcoin ATM Section -->
  <section class="section atm-section" id="buy-with-cash">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Method 2 — No Account Needed</span>
        <h2>Buy Bitcoin With Cash <span class="text-accent">(Bitcoin ATMs)</span></h2>
        <p>Don't want to create an exchange account? Bitcoin ATMs let you buy Bitcoin with cash in about 60 seconds. There are over 50 Bitcoin ATMs across Australia.</p>
      </div>

      <div class="atm-how-it-works">
        <div class="atm-step">
          <div class="atm-step-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          </div>
          <h3>Find an ATM</h3>
          <p>Use our map below to locate a Bitcoin ATM near you</p>
        </div>
        <div class="atm-step-arrow">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </div>
        <div class="atm-step">
          <div class="atm-step-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.01M6 12h.01M6 16h.01M10 8h8M10 12h8M10 16h8"/></svg>
          </div>
          <h3>Insert Cash</h3>
          <p>Feed your Australian dollars into the machine</p>
        </div>
        <div class="atm-step-arrow">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </div>
        <div class="atm-step">
          <div class="atm-step-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><path d="M12 18h.01"/></svg>
          </div>
          <h3>Scan & Receive</h3>
          <p>Scan our QR code from checkout and Bitcoin is sent instantly</p>
        </div>
      </div>

      <div class="atm-info-cards">
        <div class="atm-info-card">
          <div class="info-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
          </div>
          <h4>What You Need</h4>
          <ul>
            <li>Cash (AUD notes)</li>
            <li>Mobile phone (for SMS verification)</li>
            <li>Our Bitcoin address from checkout (QR code)</li>
          </ul>
        </div>
        <div class="atm-info-card">
          <div class="info-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
          </div>
          <h4>ATM Fees</h4>
          <ul>
            <li>Fees typically 5-10% of transaction</li>
            <li>No exchange account needed</li>
            <li>Higher fees but maximum convenience</li>
          </ul>
        </div>
        <div class="atm-info-card">
          <div class="info-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <h4>Limits</h4>
          <ul>
            <li>Under $1,000: Phone number only</li>
            <li>$1,000-$10,000: ID required</li>
            <li>Some ATMs accept up to $15,000</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ATM Map Section -->
  <section class="section atm-map-section" id="atm-map">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Find a Bitcoin ATM</span>
        <h2>Bitcoin ATM Locations <span class="text-accent">Across Australia</span></h2>
        <p>Select your city to view Bitcoin ATM locations near you. Click any marker for details and directions.</p>
      </div>

      <!-- Map App Container -->
      <div class="map-app">
        <!-- Sidebar -->
        <div class="map-sidebar">
          <div class="sidebar-header">
            <h3 class="sidebar-title">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
              ATM Locations
            </h3>
            <span class="sidebar-count" id="atm-count-badge">54 ATMs</span>
          </div>

          <!-- City dropdown -->
          <div class="city-dropdown-wrap">
            <select class="city-dropdown" id="city-select">
              <option value="all">All Cities (54 ATMs)</option>
              {cities.map((city) => (
                <option value={city.slug}>{city.name}, {city.state} — {city.atms} ATM{city.atms !== 1 ? 's' : ''}</option>
              ))}
            </select>
            <svg class="dropdown-chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
          </div>

          <!-- ATM List -->
          <div class="atm-list" id="atm-list">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Map -->
        <div class="map-panel">
          <!-- Map overlay controls -->
          <div class="map-overlay-controls">
            <button class="map-ctrl-btn" id="zoom-all-btn" title="View all Australia">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M9 21H3v-6"/><path d="m21 3-7 7"/><path d="m3 21 7-7"/></svg>
            </button>
            <button class="map-ctrl-btn" id="locate-btn" title="Use my location">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2v3"/><path d="M12 19v3"/><path d="M2 12h3"/><path d="M19 12h3"/></svg>
            </button>
          </div>
          <!-- Leaflet map -->
          <div id="atm-leaflet-map"></div>
        </div>
      </div>

      <!-- Map credit -->
      <div class="map-info">
        <p class="map-credit">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
          Click any pin for ATM details, hours, and directions. Map tiles by <a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener noreferrer">OpenStreetMap</a> &middot; <a href="https://carto.com/attributions" target="_blank" rel="noopener noreferrer">CARTO</a>.
        </p>
      </div>

      <!-- City Quick-Access Pills -->
      <div class="city-pills">
        {cities.map((city) => (
          <button class="city-pill" data-city={city.slug} data-lat={city.lat} data-lng={city.lng} data-zoom={city.mapZoom}>
            <span class="pill-name">{city.name}</span>
            <span class="pill-count">{city.atms}</span>
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Pro Tips Section -->
  <section class="section tips-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Pro Tips</span>
        <h2>Tips for First-Time Bitcoin Buyers</h2>
      </div>
      <div class="tips-grid">
        <div class="tip-card">
          <div class="tip-number">01</div>
          <h3>Only Buy What You Need</h3>
          <p>Don't overthink it. Just buy the exact amount of Bitcoin you need for your order. You're not investing — you're making a payment.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">02</div>
          <h3>Use PayID for Speed</h3>
          <p>PayID (through your banking app) is the fastest way to deposit AUD to an exchange. It's instant and free at most exchanges.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">03</div>
          <h3>Buy Slightly More</h3>
          <p>Buy $5-10 extra to cover the small network fee for sending Bitcoin. This way you won't be short when paying.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">04</div>
          <h3>Double-Check the Address</h3>
          <p>When sending Bitcoin, always double-check the first and last 4 characters of the wallet address match. Or just scan the QR code — it's foolproof.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">05</div>
          <h3>Screenshot Your TX</h3>
          <p>After sending Bitcoin, screenshot the transaction ID. Share it with us via the order confirmation page for faster processing.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">06</div>
          <h3>Don't Panic About Fees</h3>
          <p>Exchange fees (1%) and network fees (&lt;$1) are much lower than credit card surcharges. You're actually saving money with Bitcoin.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="section faq-section" id="faq">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Common Questions</span>
        <h2>Bitcoin FAQ for Beginners</h2>
        <p>Everything you need to know about buying and using Bitcoin for payments in Australia.</p>
      </div>
      <div class="faq-container">
        {faqs.map((faq, index) => (
          <details class="faq-item">
            <summary class="faq-question">
              <span class="faq-q-text">{faq.q}</span>
              <span class="faq-toggle">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
              </span>
            </summary>
            <div class="faq-answer">
              <p>{faq.a}</p>
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <!-- Other Payment Methods -->
  <section class="section other-payments">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Other Options</span>
        <h2>Other Payment Methods</h2>
        <p>Bitcoin not for you? We accept other payment methods to suit your preference.</p>
      </div>
      <div class="other-grid">
        <a href="/pay-with-bank-transfer" class="other-card">
          <div class="other-icon other-icon-bank">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="10" width="18" height="11" rx="1"/><path d="M3 10l9-7 9 7"/><line x1="7" y1="14" x2="7" y2="17"/><line x1="12" y1="14" x2="12" y2="17"/><line x1="17" y1="14" x2="17" y2="17"/></svg>
          </div>
          <div>
            <h3>Bank Transfer</h3>
            <p>Direct bank transfer via PayID or BSB. Zero fees, simple and reliable.</p>
          </div>
          <svg class="other-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </a>
        <a href="/pay-with-paysafecard" class="other-card">
          <div class="other-icon other-icon-psc">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="5" width="20" height="14" rx="2"/><path d="M2 10h20"/><path d="M6 15h4"/></svg>
          </div>
          <div>
            <h3>Paysafecard</h3>
            <p>Prepaid voucher — buy with cash, pay with a 16-digit PIN. 100% anonymous.</p>
          </div>
          <svg class="other-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section cta-section">
    <div class="container">
      <div class="cta-card">
        <div class="cta-content">
          <h2>Ready to Place Your Order?</h2>
          <p>Now that you know how to buy Bitcoin, browse our collection of lab-tested cannabis products and pay securely at checkout.</p>
          <div class="cta-buttons">
            <a href="/shop" class="btn btn-primary btn-large">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
              Browse Products
            </a>
            <a href="/how-it-works" class="btn btn-outline">
              How Ordering Works
            </a>
          </div>
        </div>
        <div class="cta-decoration">
          <svg width="120" height="120" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="0.5" opacity="0.2"/>
            <path d="M9.5 7.5V9H8V11H9.5V16.5H11.5V11H13.5L14 9H11.5V7.8C11.5 7.36 11.72 7.15 12.22 7.15H14V5H12.22C10.24 5 9.5 6.06 9.5 7.5Z" fill="currentColor" opacity="0.15"/>
            <text x="12" y="14" text-anchor="middle" font-size="8" font-weight="bold" fill="currentColor" opacity="0.15">₿</text>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</Layout>

<style>
  /* Hero */
  .hero {
    position: relative;
    padding: var(--space-3xl) 0 var(--space-4xl);
    overflow: hidden;
    min-height: 550px;
    display: flex;
    align-items: center;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-gradient {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #0a1628 0%, #0d2137 30%, #132d1a 70%, #0a1628 100%);
  }

  .hero-pattern {
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle at 20% 80%, rgba(247, 147, 26, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(45, 90, 74, 0.12) 0%, transparent 50%);
  }

  .hero .container {
    position: relative;
    z-index: 1;
  }

  .hero-content {
    max-width: 800px;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 18px;
    background: rgba(247, 147, 26, 0.12);
    border: 1px solid rgba(247, 147, 26, 0.25);
    border-radius: var(--radius-full);
    color: #f7931a;
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: var(--space-lg);
  }

  .hero h1 {
    color: white;
    font-size: clamp(2.25rem, 5vw, 3.5rem);
    margin-bottom: var(--space-lg);
    line-height: 1.15;
  }

  .text-gradient {
    background: linear-gradient(135deg, #f7931a 0%, #ffb347 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-description {
    color: rgba(255, 255, 255, 0.75);
    font-size: 1.15rem;
    line-height: 1.7;
    max-width: 620px;
    margin-bottom: var(--space-xl);
  }

  .hero-stats {
    display: flex;
    gap: var(--space-xl);
    margin-bottom: var(--space-xl);
    flex-wrap: wrap;
  }

  .hero-stat {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .stat-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    background: rgba(247, 147, 26, 0.12);
    color: #f7931a;
  }

  .stat-value {
    display: block;
    font-weight: 700;
    color: white;
    font-size: 1.1rem;
  }

  .stat-label {
    display: block;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.5);
  }

  .hero-ctas {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  /* Why Bitcoin */
  .why-bitcoin {
    background: white;
  }

  .section-header {
    text-align: center;
    max-width: 640px;
    margin: 0 auto var(--space-3xl);
  }

  .section-header p {
    font-size: 1.05rem;
    color: var(--color-text-light);
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-xl);
  }

  .benefit-card {
    text-align: center;
    padding: var(--space-xl);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    transition: all var(--transition-base);
  }

  .benefit-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .benefit-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: var(--radius-md);
    background: rgba(45, 90, 74, 0.08);
    color: var(--color-primary);
    margin-bottom: var(--space-md);
  }

  .benefit-card h3 {
    font-size: 1.1rem;
    margin-bottom: var(--space-sm);
  }

  .benefit-card p {
    font-size: 0.9rem;
    color: var(--color-text-light);
    margin: 0;
    line-height: 1.6;
  }

  /* Steps */
  .buy-online {
    background: var(--color-bg);
  }

  .steps-container {
    max-width: 780px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
  }

  .step-card {
    display: flex;
    gap: var(--space-xl);
    background: white;
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    border: 1px solid var(--color-border);
    transition: all var(--transition-base);
  }

  .step-card:hover {
    box-shadow: var(--shadow-md);
  }

  .step-number {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.2rem;
  }

  .step-content h3 {
    font-size: 1.15rem;
    margin-bottom: var(--space-sm);
  }

  .step-content p {
    color: var(--color-text-light);
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: var(--space-md);
  }

  .step-list {
    margin: var(--space-md) 0;
    padding-left: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .step-list li {
    font-size: 0.92rem;
    color: var(--color-text-light);
    padding: 8px 12px;
    background: var(--color-bg);
    border-radius: var(--radius-sm);
    list-style: none;
  }

  .step-list.numbered {
    counter-reset: step;
  }

  .step-list.numbered li {
    counter-increment: step;
  }

  .step-list.numbered li::before {
    content: counter(step) ". ";
    font-weight: 600;
    color: var(--color-primary);
  }

  .step-tip {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-md);
    background: rgba(45, 90, 74, 0.06);
    border-radius: var(--radius-md);
    font-size: 0.85rem;
    color: var(--color-primary);
    border-left: 3px solid var(--color-primary);
  }

  .step-tip svg {
    flex-shrink: 0;
    margin-top: 2px;
  }

  .step-tip.success {
    background: rgba(16, 185, 129, 0.08);
    border-left-color: #10b981;
    color: #065f46;
  }

  /* Mock UI */
  .step-visual {
    margin-top: var(--space-md);
  }

  .mock-ui {
    background: var(--color-bg);
    border-radius: var(--radius-md);
    padding: var(--space-lg);
    border: 1px solid var(--color-border);
    max-width: 320px;
  }

  .mock-header {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: var(--space-md);
    text-align: center;
    color: var(--color-text);
  }

  .mock-input {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: white;
    border-radius: var(--radius-sm);
    border: 1px solid var(--color-border);
  }

  .mock-label {
    color: var(--color-text-muted);
    font-size: 0.85rem;
  }

  .mock-value {
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--color-text);
  }

  .mock-value small {
    font-weight: 400;
    color: var(--color-text-muted);
    font-size: 0.8rem;
  }

  .mock-btc {
    color: #f7931a;
  }

  .mock-arrow {
    display: flex;
    justify-content: center;
    padding: var(--space-sm) 0;
    color: var(--color-text-muted);
  }

  .mock-btn {
    margin-top: var(--space-md);
    padding: 12px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: white;
    text-align: center;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 0.9rem;
  }

  /* Exchanges */
  .exchanges {
    background: var(--color-bg);
  }

  .exchanges-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
  }

  .exchange-card {
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    border: 1px solid var(--color-border);
    position: relative;
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
    overflow: hidden;
  }

  .exchange-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.04);
    border-color: rgba(45, 90, 74, 0.2);
  }

  .exchange-card:hover .external-icon {
    opacity: 1;
    transform: translate(1px, -1px);
  }

  .exchange-card:hover .visit-link {
    color: var(--color-primary);
  }

  .exchange-card:hover .visit-link svg {
    transform: translateX(3px);
  }

  .exchange-card.recommended {
    border-color: var(--color-primary);
    background: linear-gradient(180deg, rgba(45, 90, 74, 0.03) 0%, white 40%);
    box-shadow: 0 4px 24px rgba(45, 90, 74, 0.08);
  }

  .exchange-badge {
    position: absolute;
    top: 0;
    right: 0;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: white;
    font-size: 0.72rem;
    font-weight: 600;
    padding: 6px 14px 6px 12px;
    border-radius: 0 var(--radius-lg) 0 var(--radius-lg);
    white-space: nowrap;
    letter-spacing: 0.02em;
  }

  .exchange-top {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: var(--space-md);
  }

  .exchange-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    border-radius: 14px;
    border: 1.5px solid;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .exchange-initial {
    font-size: 1.3rem;
    font-weight: 700;
    font-family: var(--font-display);
  }

  .exchange-title {
    flex: 1;
    min-width: 0;
  }

  .exchange-title h3 {
    font-size: 1.1rem;
    font-weight: 700;
    margin: 0 0 2px;
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--color-text);
  }

  .external-icon {
    opacity: 0.3;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .exchange-year {
    font-size: 0.75rem;
    color: var(--color-text-muted);
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .exchange-desc {
    font-size: 0.88rem;
    color: var(--color-text-light);
    line-height: 1.55;
    margin: 0 0 var(--space-lg);
    flex-grow: 1;
  }

  .exchange-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0;
    background: var(--color-bg);
    border-radius: var(--radius-md);
    padding: 2px;
    margin-bottom: var(--space-md);
  }

  .exchange-stat {
    text-align: center;
    padding: 10px 6px;
    border-radius: calc(var(--radius-md) - 2px);
  }

  .stat-label {
    display: block;
    font-size: 0.68rem;
    font-weight: 500;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 4px;
  }

  .stat-value {
    display: block;
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--color-text);
  }

  .stat-value.accent {
    color: #10b981;
  }

  .exchange-deposits {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: var(--space-md);
    flex-wrap: wrap;
  }

  .deposits-label {
    font-size: 0.75rem;
    color: var(--color-text-muted);
    font-weight: 500;
  }

  .deposit-tags {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
  }

  .deposit-tag {
    font-size: 0.72rem;
    font-weight: 500;
    padding: 3px 9px;
    border-radius: var(--radius-full);
    background: rgba(45, 90, 74, 0.06);
    color: var(--color-primary);
    border: 1px solid rgba(45, 90, 74, 0.12);
  }

  .exchange-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: auto;
    padding-top: var(--space-md);
    border-top: 1px solid var(--color-border);
  }

  .best-for-tag {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: var(--radius-full);
    border: 1px solid;
  }

  .visit-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.82rem;
    font-weight: 600;
    color: var(--color-text-muted);
    transition: all 0.2s ease;
  }

  .visit-link svg {
    transition: transform 0.2s ease;
  }

  .exchanges-note {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-top: var(--space-xl);
    padding: var(--space-md) var(--space-lg);
    background: rgba(45, 90, 74, 0.04);
    border-radius: var(--radius-md);
    border: 1px solid rgba(45, 90, 74, 0.1);
  }

  .exchanges-note svg {
    flex-shrink: 0;
    color: var(--color-primary);
    margin-top: 2px;
  }

  .exchanges-note p {
    font-size: 0.82rem;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin: 0;
  }

  .ease-dots {
    display: flex;
    gap: 3px;
    justify-content: center;
  }

  .ease-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-border-dark);
  }

  .ease-dot.active {
    background: var(--color-primary);
  }

  /* ATM Section */
  .atm-section {
    background: var(--color-bg);
  }

  .atm-how-it-works {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-lg);
    margin-bottom: var(--space-3xl);
    padding: var(--space-xl);
    background: white;
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
  }

  .atm-step {
    text-align: center;
    flex: 1;
    max-width: 200px;
  }

  .atm-step-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: rgba(247, 147, 26, 0.1);
    color: #f7931a;
    margin-bottom: var(--space-sm);
  }

  .atm-step h3 {
    font-size: 1rem;
    margin-bottom: 4px;
  }

  .atm-step p {
    font-size: 0.85rem;
    color: var(--color-text-muted);
    margin: 0;
  }

  .atm-step-arrow {
    color: var(--color-text-muted);
    flex-shrink: 0;
  }

  .atm-info-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-xl);
  }

  .atm-info-card {
    background: white;
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    border: 1px solid var(--color-border);
  }

  .info-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: var(--radius-md);
    background: rgba(247, 147, 26, 0.08);
    color: #f7931a;
    margin-bottom: var(--space-md);
  }

  .atm-info-card h4 {
    font-size: 1rem;
    margin-bottom: var(--space-md);
  }

  .atm-info-card ul {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .atm-info-card li {
    font-size: 0.9rem;
    color: var(--color-text-light);
    padding-left: 16px;
    position: relative;
  }

  .atm-info-card li::before {
    content: '•';
    position: absolute;
    left: 0;
    color: var(--color-primary);
    font-weight: bold;
  }

  /* ATM Map — Premium UI */
  .atm-map-section {
    background: white;
  }

  .map-app {
    display: grid;
    grid-template-columns: 340px 1fr;
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid var(--color-border);
    box-shadow: 0 8px 40px rgba(0,0,0,0.10), 0 1px 3px rgba(0,0,0,0.06);
    height: 600px;
    margin-bottom: var(--space-lg);
  }

  /* Sidebar */
  .map-sidebar {
    background: #1a1f2e;
    color: #fff;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 20px 14px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }

  .sidebar-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.95rem;
    font-weight: 600;
    margin: 0;
    color: #fff;
    font-family: var(--font-primary);
  }

  .sidebar-title svg {
    color: #F7931A;
  }

  .sidebar-count {
    background: #F7931A;
    color: #fff;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.72rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .city-dropdown-wrap {
    position: relative;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  .city-dropdown {
    width: 100%;
    padding: 10px 36px 10px 14px;
    background: rgba(255,255,255,0.07);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    font-size: 0.85rem;
    font-family: var(--font-primary);
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    transition: all 0.2s;
  }

  .city-dropdown:hover,
  .city-dropdown:focus {
    background: rgba(255,255,255,0.12);
    border-color: #F7931A;
    outline: none;
  }

  .city-dropdown option {
    background: #1a1f2e;
    color: #fff;
  }

  .dropdown-chevron {
    position: absolute;
    right: 30px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(255,255,255,0.4);
    pointer-events: none;
  }

  /* ATM List */
  .atm-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
  }

  .atm-list::-webkit-scrollbar {
    width: 4px;
  }

  .atm-list::-webkit-scrollbar-track {
    background: transparent;
  }

  .atm-list::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
    border-radius: 4px;
  }

  .atm-list-item {
    display: flex;
    gap: 12px;
    padding: 14px 12px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
  }

  .atm-list-item:hover {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.08);
  }

  .atm-list-item.active {
    background: rgba(247,147,26,0.12);
    border-color: rgba(247,147,26,0.3);
  }

  .atm-list-icon {
    flex-shrink: 0;
    width: 38px;
    height: 38px;
    background: #F7931A;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .atm-list-icon svg {
    width: 18px;
    height: 18px;
  }

  .atm-list-details {
    flex: 1;
    min-width: 0;
  }

  .atm-list-name {
    font-size: 0.82rem;
    font-weight: 600;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 3px;
  }

  .atm-list-address {
    font-size: 0.72rem;
    color: rgba(255,255,255,0.5);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 5px;
  }

  .atm-list-meta {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .atm-list-hours {
    font-size: 0.68rem;
    font-weight: 600;
    padding: 2px 7px;
    border-radius: 4px;
    background: rgba(45, 90, 74, 0.25);
    color: #6dd5a0;
  }

  .atm-list-hours.limited {
    background: rgba(196, 112, 75, 0.2);
    color: #e8a97e;
  }

  .atm-list-operator {
    font-size: 0.68rem;
    color: rgba(255,255,255,0.35);
  }

  /* Map Panel */
  .map-panel {
    position: relative;
    overflow: hidden;
  }

  #atm-leaflet-map {
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .map-overlay-controls {
    position: absolute;
    top: 14px;
    right: 14px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .map-ctrl-btn {
    width: 36px;
    height: 36px;
    background: #fff;
    border: none;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: #333;
  }

  .map-ctrl-btn:hover {
    background: #F7931A;
    color: #fff;
    transform: scale(1.05);
  }

  .map-info {
    margin-top: var(--space-md);
  }

  .map-credit {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: 0.78rem;
    color: var(--color-text-muted);
  }

  .map-credit a {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  /* City Pills */
  .city-pills {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: var(--space-xl);
  }

  .city-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: all 0.2s;
    font-family: var(--font-primary);
    font-size: 0.82rem;
  }

  .city-pill:hover {
    border-color: #F7931A;
    background: rgba(247,147,26,0.05);
  }

  .city-pill.active {
    background: #F7931A;
    border-color: #F7931A;
    color: #fff;
  }

  .pill-name {
    font-weight: 600;
  }

  .pill-count {
    background: rgba(0,0,0,0.08);
    padding: 1px 7px;
    border-radius: 10px;
    font-size: 0.7rem;
    font-weight: 700;
  }

  .city-pill.active .pill-count {
    background: rgba(255,255,255,0.25);
  }

  /* Marker animations */
  @keyframes markerPulse {
    0% { box-shadow: 0 0 0 0 rgba(247,147,26,0.5); }
    70% { box-shadow: 0 0 0 14px rgba(247,147,26,0); }
    100% { box-shadow: 0 0 0 0 rgba(247,147,26,0); }
  }

  :global(.btc-marker-pin) {
    animation: markerPulse 2.5s infinite;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s;
  }

  :global(.btc-marker-pin:hover) {
    transform: scale(1.15);
  }

  /* Popup styles */
  :global(.leaflet-popup-content-wrapper) {
    border-radius: 14px !important;
    box-shadow: 0 12px 40px rgba(0,0,0,0.18) !important;
    padding: 0 !important;
    overflow: hidden;
  }

  :global(.leaflet-popup-content) {
    margin: 0 !important;
    width: auto !important;
    min-width: 280px !important;
  }

  :global(.leaflet-popup-tip) {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
  }

  :global(.atm-popup) {
    font-family: Inter, system-ui, -apple-system, sans-serif;
  }

  :global(.atm-popup-header) {
    background: linear-gradient(135deg, #1a1f2e 0%, #2a2f3e 100%);
    padding: 16px 18px 14px;
    color: #fff;
  }

  :global(.atm-popup-name) {
    font-size: 0.92rem;
    font-weight: 700;
    margin: 0 0 4px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  :global(.atm-popup-operator) {
    font-size: 0.72rem;
    color: rgba(255,255,255,0.5);
  }

  :global(.atm-popup-body) {
    padding: 14px 18px 16px;
  }

  :global(.atm-popup-address) {
    font-size: 0.8rem;
    color: #555;
    margin: 0 0 12px;
    line-height: 1.5;
    display: flex;
    align-items: flex-start;
    gap: 8px;
  }

  :global(.atm-popup-address svg) {
    flex-shrink: 0;
    margin-top: 2px;
    color: #F7931A;
  }

  :global(.atm-popup-tags) {
    display: flex;
    gap: 8px;
    margin-bottom: 14px;
  }

  :global(.atm-popup-tag) {
    font-size: 0.72rem;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  :global(.atm-popup-tag.hours) {
    background: #e8f5e9;
    color: #2e7d32;
  }

  :global(.atm-popup-tag.hours.limited) {
    background: #fff3e0;
    color: #e65100;
  }

  :global(.atm-popup-tag.buy) {
    background: #e3f2fd;
    color: #1565c0;
  }

  :global(.atm-popup-directions) {
    display: flex;
    gap: 8px;
  }

  :global(.atm-popup-btn) {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px;
    border-radius: 10px;
    font-size: 0.78rem;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s;
    font-family: Inter, system-ui, sans-serif;
  }

  :global(.atm-popup-btn.primary) {
    background: #F7931A;
    color: #fff;
  }

  :global(.atm-popup-btn.primary:hover) {
    background: #e8850e;
    transform: translateY(-1px);
  }

  :global(.atm-popup-btn.secondary) {
    background: #f5f5f5;
    color: #333;
  }

  :global(.atm-popup-btn.secondary:hover) {
    background: #eee;
  }

  /* Tips */
  .tips-section {
    background: var(--color-bg);
  }

  .tips-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-xl);
  }

  .tip-card {
    background: white;
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    border: 1px solid var(--color-border);
    transition: all var(--transition-base);
  }

  .tip-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .tip-number {
    font-size: 2rem;
    font-weight: 700;
    color: rgba(45, 90, 74, 0.12);
    font-family: var(--font-display);
    margin-bottom: var(--space-sm);
  }

  .tip-card h3 {
    font-size: 1.05rem;
    margin-bottom: var(--space-sm);
  }

  .tip-card p {
    font-size: 0.9rem;
    color: var(--color-text-light);
    line-height: 1.6;
    margin: 0;
  }

  /* FAQ */
  .faq-section {
    background: white;
  }

  .faq-container {
    max-width: 780px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .faq-item {
    background: var(--color-bg);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    overflow: hidden;
    transition: all var(--transition-fast);
  }

  .faq-item[open] {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-sm);
  }

  .faq-question {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-lg) var(--space-xl);
    cursor: pointer;
    user-select: none;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--color-text);
    list-style: none;
    gap: var(--space-md);
    min-height: 44px;
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .faq-question::marker {
    display: none;
    content: '';
  }

  .faq-toggle {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--color-bg-alt);
    color: var(--color-text-muted);
    transition: all var(--transition-fast);
  }

  .faq-item[open] .faq-toggle {
    transform: rotate(180deg);
    background: var(--color-primary);
    color: white;
  }

  .faq-answer {
    padding: 0 var(--space-xl) var(--space-lg);
  }

  .faq-answer p {
    font-size: 0.92rem;
    color: var(--color-text-light);
    line-height: 1.7;
    margin: 0;
  }

  /* CTA */
  .cta-section {
    background: var(--color-bg);
  }

  .cta-card {
    background: linear-gradient(135deg, #0d2137 0%, #132d1a 100%);
    border-radius: var(--radius-xl);
    padding: var(--space-4xl) var(--space-3xl);
    position: relative;
    overflow: hidden;
    text-align: center;
  }

  .cta-content {
    position: relative;
    z-index: 1;
  }

  .cta-card h2 {
    color: white;
    font-size: clamp(1.75rem, 3.5vw, 2.25rem);
    margin-bottom: var(--space-md);
  }

  .cta-card p {
    color: rgba(255, 255, 255, 0.7);
    font-size: 1.05rem;
    max-width: 520px;
    margin: 0 auto var(--space-xl);
    line-height: 1.6;
  }

  .cta-buttons {
    display: flex;
    gap: var(--space-md);
    justify-content: center;
    flex-wrap: wrap;
  }

  .cta-decoration {
    position: absolute;
    top: 50%;
    right: -20px;
    transform: translateY(-50%);
    color: rgba(247, 147, 26, 0.15);
    pointer-events: none;
  }

  /* Other Payment Methods */
  .other-payments {
    background: var(--color-bg);
  }

  .other-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-lg);
    max-width: 700px;
    margin: 0 auto;
  }

  .other-card {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-xl);
    background: white;
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-base);
  }

  .other-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary);
  }

  .other-card:hover .other-arrow {
    transform: translateX(3px);
    color: var(--color-primary);
  }

  .other-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .other-icon-bank {
    background: rgba(45, 90, 74, 0.1);
    color: var(--color-primary);
  }

  .other-icon-psc {
    background: rgba(0, 163, 224, 0.1);
    color: #00a3e0;
  }

  .other-card h3 {
    font-size: 1rem;
    margin-bottom: 2px;
  }

  .other-card p {
    font-size: 0.85rem;
    color: var(--color-text-light);
    margin: 0;
  }

  .other-arrow {
    flex-shrink: 0;
    margin-left: auto;
    color: var(--color-text-muted);
    transition: all var(--transition-base);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .benefits-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .exchanges-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .atm-info-cards {
      grid-template-columns: 1fr;
    }

    .tips-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .map-app {
      grid-template-columns: 280px 1fr;
      height: 550px;
    }
  }

  @media (max-width: 768px) {
    .hero {
      min-height: auto;
      padding: var(--space-2xl) 0 var(--space-3xl);
    }

    .hero h1 {
      font-size: 2rem;
    }

    .hero-description {
      font-size: 1rem;
    }

    .hero-stats {
      gap: var(--space-lg);
    }

    .hero-ctas {
      flex-direction: column;
    }

    .hero-ctas .btn {
      width: 100%;
      justify-content: center;
    }

    .benefits-grid {
      grid-template-columns: 1fr;
    }

    .step-card {
      flex-direction: column;
      gap: var(--space-md);
    }

    .atm-how-it-works {
      flex-direction: column;
      gap: var(--space-md);
    }

    .atm-step-arrow {
      transform: rotate(90deg);
    }

    .tips-grid {
      grid-template-columns: 1fr;
    }

    .map-app {
      grid-template-columns: 1fr;
      height: auto;
    }

    .map-sidebar {
      max-height: none;
    }

    .atm-list {
      max-height: 200px;
    }

    .map-panel {
      height: 400px;
    }

    #atm-leaflet-map {
      height: 400px !important;
    }

    .cta-card {
      padding: var(--space-2xl) var(--space-lg);
    }

    .cta-buttons {
      flex-direction: column;
    }

    .cta-buttons .btn {
      width: 100%;
      justify-content: center;
    }

    .other-grid {
      grid-template-columns: 1fr;
    }

    .city-pills {
      gap: 6px;
    }

    .city-pill {
      padding: 6px 12px;
      font-size: 0.75rem;
    }
  }

  @media (max-width: 480px) {
    .map-panel {
      height: 350px;
    }

    #atm-leaflet-map {
      height: 350px !important;
    }

    .faq-question {
      padding: var(--space-md);
      font-size: 0.9rem;
    }

    .faq-answer {
      padding: 0 var(--space-md) var(--space-md);
    }

    .step-content h3 {
      font-size: 1.05rem;
    }

    .exchange-card {
      padding: var(--space-lg);
    }

    .exchanges-grid {
      grid-template-columns: 1fr;
    }

    .exchange-stats {
      grid-template-columns: repeat(4, 1fr);
    }
  }
</style>

<script>
  // Load Leaflet CSS
  const leafletCSS = document.createElement('link');
  leafletCSS.rel = 'stylesheet';
  leafletCSS.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
  leafletCSS.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
  leafletCSS.crossOrigin = '';
  document.head.appendChild(leafletCSS);

  // Load Leaflet JS
  const leafletJS = document.createElement('script');
  leafletJS.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
  leafletJS.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
  leafletJS.crossOrigin = '';
  document.head.appendChild(leafletJS);

  leafletJS.onload = () => {
    const L = (window as any).L;

    // Bitcoin ATM location data
    const bitcoinATMs = [
      // Sydney (14)
      { city: 'sydney', name: 'CoinFlip Bitcoin ATM', address: '363 George St, Sydney NSW 2000', lat: -33.8712, lng: 151.2070, operator: 'CoinFlip', hours: '24/7' },
      { city: 'sydney', name: 'Localcoin Bitcoin ATM', address: '683 George St, Haymarket NSW 2000', lat: -33.8790, lng: 151.2044, operator: 'Localcoin', hours: '24/7' },
      { city: 'sydney', name: 'CoinSpot ATM', address: 'Westfield Bondi Junction, 500 Oxford St, Bondi Junction NSW 2022', lat: -33.8918, lng: 151.2474, operator: 'CoinSpot ATM', hours: '9am – 9pm' },
      { city: 'sydney', name: 'Coinstop Bitcoin ATM', address: '159 Church St, Parramatta NSW 2150', lat: -33.8151, lng: 151.0011, operator: 'Coinstop', hours: '24/7' },
      { city: 'sydney', name: 'CoinFlip Bitcoin ATM', address: 'Westfield Chatswood, 1 Anderson St, Chatswood NSW 2067', lat: -33.7969, lng: 151.1832, operator: 'CoinFlip', hours: '9am – 9pm' },
      { city: 'sydney', name: 'Coinme Bitcoin ATM', address: '270 King St, Newtown NSW 2042', lat: -33.8963, lng: 151.1792, operator: 'Coinme', hours: '24/7' },
      { city: 'sydney', name: 'Localcoin Bitcoin ATM', address: '14 Cronulla St, Cronulla NSW 2230', lat: -34.0547, lng: 151.1517, operator: 'Localcoin', hours: '8am – 10pm' },
      { city: 'sydney', name: 'Bitcoin of America ATM', address: 'Westfield Liverpool, Macquarie St, Liverpool NSW 2170', lat: -33.9207, lng: 150.9234, operator: 'Bitcoin of America', hours: '9am – 9pm' },
      { city: 'sydney', name: 'CoinFlip Bitcoin ATM', address: '2 Woodville Rd, Granville NSW 2142', lat: -33.8335, lng: 151.0122, operator: 'CoinFlip', hours: '24/7' },
      { city: 'sydney', name: 'Coinstop Bitcoin ATM', address: 'Westfield Hurstville, Cross St, Hurstville NSW 2220', lat: -33.9668, lng: 151.1029, operator: 'Coinstop', hours: '9am – 9pm' },
      { city: 'sydney', name: 'CoinSpot ATM', address: '315 Main St, Blacktown NSW 2148', lat: -33.7686, lng: 150.9063, operator: 'CoinSpot ATM', hours: '24/7' },
      { city: 'sydney', name: 'Localcoin Bitcoin ATM', address: '236 Marrickville Rd, Marrickville NSW 2204', lat: -33.9117, lng: 151.1554, operator: 'Localcoin', hours: '8am – 10pm' },
      { city: 'sydney', name: 'CoinFlip Bitcoin ATM', address: 'Westfield Hornsby, 236 Pacific Hwy, Hornsby NSW 2077', lat: -33.7046, lng: 151.0985, operator: 'CoinFlip', hours: '9am – 9pm' },
      { city: 'sydney', name: 'Coinme Bitcoin ATM', address: '181 Burwood Rd, Burwood NSW 2134', lat: -33.8774, lng: 151.1042, operator: 'Coinme', hours: '24/7' },
      // Melbourne (13)
      { city: 'melbourne', name: 'CoinFlip Bitcoin ATM', address: '206 Bourke St, Melbourne VIC 3000', lat: -37.8132, lng: 144.9660, operator: 'CoinFlip', hours: '24/7' },
      { city: 'melbourne', name: 'Coinstop Bitcoin ATM', address: '115 Swanston St, Melbourne VIC 3000', lat: -37.8148, lng: 144.9657, operator: 'Coinstop', hours: '24/7' },
      { city: 'melbourne', name: 'CoinSpot ATM', address: '303 Brunswick St, Fitzroy VIC 3065', lat: -37.7983, lng: 144.9780, operator: 'CoinSpot ATM', hours: '8am – 11pm' },
      { city: 'melbourne', name: 'Localcoin Bitcoin ATM', address: '162 Chapel St, South Yarra VIC 3141', lat: -37.8543, lng: 144.9922, operator: 'Localcoin', hours: '24/7' },
      { city: 'melbourne', name: 'Bitcoin of America ATM', address: '92 Nicholson St, Footscray VIC 3011', lat: -37.7998, lng: 144.8997, operator: 'Bitcoin of America', hours: '9am – 9pm' },
      { city: 'melbourne', name: 'CoinFlip Bitcoin ATM', address: 'Box Hill Central, 1 Main St, Box Hill VIC 3128', lat: -37.8190, lng: 145.1218, operator: 'CoinFlip', hours: '9am – 9pm' },
      { city: 'melbourne', name: 'Coinme Bitcoin ATM', address: '380 Sydney Rd, Brunswick VIC 3056', lat: -37.7669, lng: 144.9601, operator: 'Coinme', hours: '24/7' },
      { city: 'melbourne', name: 'Coinstop Bitcoin ATM', address: '257 Bridge Rd, Richmond VIC 3121', lat: -37.8185, lng: 145.0028, operator: 'Coinstop', hours: '8am – 10pm' },
      { city: 'melbourne', name: 'CoinSpot ATM', address: '135 Acland St, St Kilda VIC 3182', lat: -37.8676, lng: 144.9747, operator: 'CoinSpot ATM', hours: '24/7' },
      { city: 'melbourne', name: 'Localcoin Bitcoin ATM', address: '218 Lygon St, Carlton VIC 3053', lat: -37.7999, lng: 144.9668, operator: 'Localcoin', hours: '8am – 10pm' },
      { city: 'melbourne', name: 'CoinFlip Bitcoin ATM', address: 'Dandenong Plaza, McCrae St, Dandenong VIC 3175', lat: -37.9875, lng: 145.2133, operator: 'CoinFlip', hours: '9am – 9pm' },
      { city: 'melbourne', name: 'Bitcoin of America ATM', address: '468 High St, Preston VIC 3072', lat: -37.7487, lng: 145.0057, operator: 'Bitcoin of America', hours: '24/7' },
      { city: 'melbourne', name: 'Coinme Bitcoin ATM', address: '85 Hampshire Rd, Sunshine VIC 3020', lat: -37.7877, lng: 144.8333, operator: 'Coinme', hours: '9am – 9pm' },
      // Brisbane (6)
      { city: 'brisbane', name: 'CoinFlip Bitcoin ATM', address: '155 Queen St, Brisbane City QLD 4000', lat: -27.4710, lng: 153.0234, operator: 'CoinFlip', hours: '24/7' },
      { city: 'brisbane', name: 'Localcoin Bitcoin ATM', address: '210 Brunswick St, Fortitude Valley QLD 4006', lat: -27.4575, lng: 153.0360, operator: 'Localcoin', hours: '24/7' },
      { city: 'brisbane', name: 'CoinSpot ATM', address: 'Westfield Chermside, Gympie Rd, Chermside QLD 4032', lat: -27.3862, lng: 153.0324, operator: 'CoinSpot ATM', hours: '9am – 9pm' },
      { city: 'brisbane', name: 'Coinstop Bitcoin ATM', address: 'Westfield Carindale, Creek Rd, Carindale QLD 4152', lat: -27.5057, lng: 153.1027, operator: 'Coinstop', hours: '9am – 9pm' },
      { city: 'brisbane', name: 'CoinFlip Bitcoin ATM', address: '98 Boundary St, West End QLD 4101', lat: -27.4802, lng: 153.0108, operator: 'CoinFlip', hours: '8am – 10pm' },
      { city: 'brisbane', name: 'Coinme Bitcoin ATM', address: 'Indooroopilly Shopping Centre, 322 Moggill Rd, Indooroopilly QLD 4068', lat: -27.4987, lng: 152.9754, operator: 'Coinme', hours: '9am – 9pm' },
      // Perth (5)
      { city: 'perth', name: 'CoinFlip Bitcoin ATM', address: '74 Murray St, Perth WA 6000', lat: -31.9527, lng: 115.8605, operator: 'CoinFlip', hours: '24/7' },
      { city: 'perth', name: 'Coinstop Bitcoin ATM', address: '45 Market St, Fremantle WA 6160', lat: -32.0569, lng: 115.7489, operator: 'Coinstop', hours: '8am – 10pm' },
      { city: 'perth', name: 'Localcoin Bitcoin ATM', address: '219 William St, Northbridge WA 6003', lat: -31.9441, lng: 115.8587, operator: 'Localcoin', hours: '24/7' },
      { city: 'perth', name: 'CoinSpot ATM', address: 'Galleria Shopping Centre, 368 Walter Rd W, Morley WA 6062', lat: -31.8948, lng: 115.9050, operator: 'CoinSpot ATM', hours: '9am – 9pm' },
      { city: 'perth', name: 'CoinFlip Bitcoin ATM', address: 'Lakeside Joondalup, 420 Joondalup Dr, Joondalup WA 6027', lat: -31.7469, lng: 115.7655, operator: 'CoinFlip', hours: '9am – 9pm' },
      // Adelaide (4)
      { city: 'adelaide', name: 'CoinFlip Bitcoin ATM', address: '77 Rundle Mall, Adelaide SA 5000', lat: -34.9227, lng: 138.6028, operator: 'CoinFlip', hours: '24/7' },
      { city: 'adelaide', name: 'Localcoin Bitcoin ATM', address: '132 The Parade, Norwood SA 5067', lat: -34.9218, lng: 138.6335, operator: 'Localcoin', hours: '8am – 10pm' },
      { city: 'adelaide', name: 'Coinstop Bitcoin ATM', address: 'Westfield Marion, 297 Diagonal Rd, Oaklands Park SA 5046', lat: -35.0129, lng: 138.5567, operator: 'Coinstop', hours: '9am – 9pm' },
      { city: 'adelaide', name: 'CoinSpot ATM', address: '168 Jetty Rd, Glenelg SA 5045', lat: -34.9811, lng: 138.5148, operator: 'CoinSpot ATM', hours: '9am – 9pm' },
      // Gold Coast (3)
      { city: 'gold-coast', name: 'CoinFlip Bitcoin ATM', address: '3159 Surfers Paradise Blvd, Surfers Paradise QLD 4217', lat: -28.0024, lng: 153.4299, operator: 'CoinFlip', hours: '24/7' },
      { city: 'gold-coast', name: 'Localcoin Bitcoin ATM', address: 'Oasis Shopping Centre, Victoria Ave, Broadbeach QLD 4218', lat: -28.0285, lng: 153.4312, operator: 'Localcoin', hours: '9am – 9pm' },
      { city: 'gold-coast', name: 'Coinstop Bitcoin ATM', address: 'Robina Town Centre, Robina Town Centre Dr, Robina QLD 4226', lat: -28.0780, lng: 153.3851, operator: 'Coinstop', hours: '9am – 9pm' },
      // Canberra (2)
      { city: 'canberra', name: 'CoinFlip Bitcoin ATM', address: 'Canberra Centre, 148 Bunda St, Canberra ACT 2601', lat: -35.2789, lng: 149.1305, operator: 'CoinFlip', hours: '9am – 9pm' },
      { city: 'canberra', name: 'Localcoin Bitcoin ATM', address: 'Westfield Belconnen, Benjamin Way, Belconnen ACT 2617', lat: -35.2393, lng: 149.0656, operator: 'Localcoin', hours: '9am – 9pm' },
      // Newcastle (2)
      { city: 'newcastle', name: 'CoinFlip Bitcoin ATM', address: '108 Hunter St, Newcastle NSW 2300', lat: -32.9267, lng: 151.7769, operator: 'CoinFlip', hours: '24/7' },
      { city: 'newcastle', name: 'Coinstop Bitcoin ATM', address: 'Charlestown Square, 30 Pearson St, Charlestown NSW 2290', lat: -32.9608, lng: 151.6881, operator: 'Coinstop', hours: '9am – 9pm' },
      // Sunshine Coast (1)
      { city: 'sunshine-coast', name: 'CoinFlip Bitcoin ATM', address: 'Sunshine Plaza, 154 Horton Parade, Maroochydore QLD 4558', lat: -26.6541, lng: 153.0914, operator: 'CoinFlip', hours: '9am – 9pm' },
      // Hobart (1)
      { city: 'hobart', name: 'Localcoin Bitcoin ATM', address: '94 Elizabeth St, Hobart TAS 7000', lat: -42.8826, lng: 147.3281, operator: 'Localcoin', hours: '8am – 10pm' },
      // Darwin (1)
      { city: 'darwin', name: 'CoinFlip Bitcoin ATM', address: 'Casuarina Square, 247 Trower Rd, Casuarina NT 0810', lat: -12.3768, lng: 130.8825, operator: 'CoinFlip', hours: '9am – 9pm' },
      // Wollongong (1)
      { city: 'wollongong', name: 'Coinstop Bitcoin ATM', address: '200 Crown St, Wollongong NSW 2500', lat: -34.4257, lng: 150.8931, operator: 'Coinstop', hours: '24/7' },
      // Central Coast (1)
      { city: 'central-coast', name: 'Localcoin Bitcoin ATM', address: 'Imperial Shopping Centre, 183 Mann St, Gosford NSW 2250', lat: -33.4265, lng: 151.3418, operator: 'Localcoin', hours: '9am – 9pm' },
    ];

    // Custom Bitcoin marker icon with pulse animation
    const btcIcon = L.divIcon({
      className: 'btc-marker-pin',
      html: `<div style="background:#F7931A;width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2.5px solid #fff;box-shadow:0 3px 14px rgba(247,147,26,0.45),0 1px 4px rgba(0,0,0,0.25);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 64 64"><path fill="#fff" d="M63.04 39.74c-4.27 17.16-21.61 27.58-38.77 23.31C7.12 58.78-3.3 41.44.97 24.28 5.24 7.12 22.58-3.3 39.74.96c17.16 4.28 27.58 21.62 23.3 38.78z"/><path fill="#F7931A" d="M46.11 27.44c.63-4.23-2.59-6.5-6.99-8.02l1.43-5.73-3.49-.87-1.39 5.58c-.92-.23-1.86-.44-2.8-.66l1.4-5.61-3.49-.87-1.43 5.73c-.76-.17-1.5-.35-2.23-.53l0-.02-4.82-1.2-.93 3.73s2.59.59 2.53.63c1.41.35 1.67 1.29 1.63 2.03l-1.63 6.55c.1.02.22.06.36.11-.12-.03-.24-.06-.36-.09l-2.29 9.19c-.17.43-.61 1.07-1.6.83.04.05-2.53-.63-2.53-.63l-1.73 4 4.55 1.13c.85.21 1.68.43 2.49.64l-1.44 5.8 3.49.87 1.43-5.74c.95.26 1.88.5 2.78.73l-1.42 5.71 3.49.87 1.44-5.78c5.95 1.13 10.43.67 12.31-4.71 1.52-4.33-.07-6.83-3.21-8.46 2.28-.53 4-2.03 4.46-5.14zm-7.99 11.2c-1.08 4.33-8.37 1.99-10.73 1.4l1.91-7.68c2.37.59 9.95 1.76 8.82 6.28zm1.08-11.27c-.98 3.94-7.05 1.94-9.02 1.45l1.74-6.96c1.97.49 8.31 1.41 7.28 5.51z"/></svg>
      </div>`,
      iconSize: [38, 38],
      iconAnchor: [19, 38],
      popupAnchor: [0, -40]
    });

    // Initialize map centered on Australia
    const map = L.map('atm-leaflet-map', {
      scrollWheelZoom: false,
      zoomControl: false,
    }).setView([-28.5, 135.0], 4);

    // Place Leaflet zoom control bottom-right
    L.control.zoom({ position: 'bottomright' }).addTo(map);

    // CARTO Voyager tiles for a clean, modern look
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
      subdomains: 'abcd',
      maxZoom: 19,
    }).addTo(map);

    // DOM elements
    const atmList = document.getElementById('atm-list') as HTMLElement;
    const citySelect = document.getElementById('city-select') as HTMLSelectElement;
    const countBadge = document.getElementById('atm-count-badge') as HTMLElement;
    const zoomAllBtn = document.getElementById('zoom-all-btn') as HTMLElement;
    const locateBtn = document.getElementById('locate-btn') as HTMLElement;
    const cityPills = document.querySelectorAll('.city-pill');

    // Marker & popup state
    let currentMarkers: any[] = [];
    let activeListItem: HTMLElement | null = null;
    let currentCity = 'all';

    // Bitcoin SVG for list items
    const btcListSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 64 64"><path fill="#fff" d="M63.04 39.74c-4.27 17.16-21.61 27.58-38.77 23.31C7.12 58.78-3.3 41.44.97 24.28 5.24 7.12 22.58-3.3 39.74.96c17.16 4.28 27.58 21.62 23.3 38.78z"/><path fill="#F7931A" d="M46.11 27.44c.63-4.23-2.59-6.5-6.99-8.02l1.43-5.73-3.49-.87-1.39 5.58c-.92-.23-1.86-.44-2.8-.66l1.4-5.61-3.49-.87-1.43 5.73c-.76-.17-1.5-.35-2.23-.53l0-.02-4.82-1.2-.93 3.73s2.59.59 2.53.63c1.41.35 1.67 1.29 1.63 2.03l-1.63 6.55c.1.02.22.06.36.11-.12-.03-.24-.06-.36-.09l-2.29 9.19c-.17.43-.61 1.07-1.6.83.04.05-2.53-.63-2.53-.63l-1.73 4 4.55 1.13c.85.21 1.68.43 2.49.64l-1.44 5.8 3.49.87 1.43-5.74c.95.26 1.88.5 2.78.73l-1.42 5.71 3.49.87 1.44-5.78c5.95 1.13 10.43.67 12.31-4.71 1.52-4.33-.07-6.83-3.21-8.46 2.28-.53 4-2.03 4.46-5.14zm-7.99 11.2c-1.08 4.33-8.37 1.99-10.73 1.4l1.91-7.68c2.37.59 9.95 1.76 8.82 6.28zm1.08-11.27c-.98 3.94-7.05 1.94-9.02 1.45l1.74-6.96c1.97.49 8.31 1.41 7.28 5.51z"/></svg>`;

    // Build popup HTML
    function buildPopup(atm: any): string {
      const isAllDay = atm.hours === '24/7';
      return `<div class="atm-popup">
        <div class="atm-popup-header">
          <div class="atm-popup-name">${atm.name}</div>
          <div class="atm-popup-operator">${atm.operator}</div>
        </div>
        <div class="atm-popup-body">
          <div class="atm-popup-address">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            ${atm.address}
          </div>
          <div class="atm-popup-tags">
            <span class="atm-popup-tag hours ${isAllDay ? '' : 'limited'}">${isAllDay ? '24/7 Open' : atm.hours}</span>
            <span class="atm-popup-tag buy">Buy BTC</span>
          </div>
          <div class="atm-popup-directions">
            <a class="atm-popup-btn" href="https://www.google.com/maps/dir/?api=1&destination=${atm.lat},${atm.lng}" target="_blank" rel="noopener noreferrer">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 11l19-9-9 19-2-8-8-2z"/></svg>
              Get Directions
            </a>
          </div>
        </div>
      </div>`;
    }

    // Build sidebar list item HTML
    function buildListItem(atm: any, index: number): string {
      const isAllDay = atm.hours === '24/7';
      return `<div class="atm-list-item" data-index="${index}">
        <div class="atm-list-icon">${btcListSvg}</div>
        <div class="atm-list-details">
          <div class="atm-list-name">${atm.name}</div>
          <div class="atm-list-address">${atm.address}</div>
          <div class="atm-list-meta">
            <span class="atm-list-hours ${isAllDay ? '' : 'limited'}">${isAllDay ? '24/7' : atm.hours}</span>
            <span class="atm-list-operator">${atm.operator}</span>
          </div>
        </div>
      </div>`;
    }

    // Show ATMs for a city (or "all")
    function showATMs(citySlug: string) {
      currentCity = citySlug;

      // Remove old markers
      currentMarkers.forEach(m => map.removeLayer(m));
      currentMarkers = [];

      // Filter ATMs
      const atms = citySlug === 'all'
        ? bitcoinATMs
        : bitcoinATMs.filter(a => a.city === citySlug);

      // Update count badge
      countBadge.textContent = `${atms.length} ATM${atms.length !== 1 ? 's' : ''}`;

      // Build sidebar list
      atmList.innerHTML = atms.map((atm, i) => buildListItem(atm, i)).join('');

      // Add markers
      atms.forEach((atm, i) => {
        const marker = L.marker([atm.lat, atm.lng], { icon: btcIcon }).addTo(map);
        marker.bindPopup(buildPopup(atm), { maxWidth: 280, className: 'btc-popup-container' });

        // When popup opens, highlight sidebar item
        marker.on('popupopen', () => {
          highlightListItem(i);
        });
        marker.on('popupclose', () => {
          clearActiveListItem();
        });

        currentMarkers.push(marker);
      });

      // Fit map bounds
      if (atms.length > 0) {
        if (citySlug === 'all') {
          // Fit all Australia with padding
          const bounds = L.latLngBounds(atms.map((a: any) => [a.lat, a.lng]));
          map.fitBounds(bounds, { padding: [40, 40], maxZoom: 5 });
        } else {
          // Use city pill data for center/zoom
          const pill = document.querySelector(`.city-pill[data-city="${citySlug}"]`);
          if (pill) {
            const lat = parseFloat(pill.getAttribute('data-lat') || '-28.5');
            const lng = parseFloat(pill.getAttribute('data-lng') || '135');
            const zoom = parseInt(pill.getAttribute('data-zoom') || '12');
            map.setView([lat, lng], zoom);
          } else {
            const bounds = L.latLngBounds(atms.map((a: any) => [a.lat, a.lng]));
            map.fitBounds(bounds, { padding: [40, 40] });
          }
        }
      }

      // Attach click handlers on list items
      atmList.querySelectorAll('.atm-list-item').forEach(el => {
        el.addEventListener('click', () => {
          const idx = parseInt(el.getAttribute('data-index') || '0');
          if (currentMarkers[idx]) {
            map.setView([atms[idx].lat, atms[idx].lng], 16, { animate: true });
            currentMarkers[idx].openPopup();
            highlightListItem(idx);
          }
        });
      });

      // Sync city pills active state
      cityPills.forEach(p => {
        if (p.getAttribute('data-city') === citySlug) {
          p.classList.add('active');
        } else {
          p.classList.remove('active');
        }
      });

      // Sync dropdown
      citySelect.value = citySlug;
    }

    function highlightListItem(index: number) {
      clearActiveListItem();
      const items = atmList.querySelectorAll('.atm-list-item');
      if (items[index]) {
        items[index].classList.add('active');
        activeListItem = items[index] as HTMLElement;
        // Scroll into view in sidebar
        activeListItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }

    function clearActiveListItem() {
      if (activeListItem) {
        activeListItem.classList.remove('active');
        activeListItem = null;
      }
    }

    // City dropdown listener
    citySelect.addEventListener('change', () => {
      showATMs(citySelect.value);
    });

    // City pill click listeners
    cityPills.forEach(pill => {
      pill.addEventListener('click', () => {
        const city = pill.getAttribute('data-city');
        if (city) showATMs(city);
      });
    });

    // Zoom-all button
    zoomAllBtn.addEventListener('click', () => {
      showATMs('all');
    });

    // Locate-me button
    locateBtn.addEventListener('click', () => {
      if ('geolocation' in navigator) {
        locateBtn.classList.add('loading');
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            locateBtn.classList.remove('loading');
            const { latitude, longitude } = pos.coords;
            map.setView([latitude, longitude], 13, { animate: true });

            // Find nearest ATMs and show all
            if (currentCity !== 'all') {
              showATMs('all');
            }
          },
          () => {
            locateBtn.classList.remove('loading');
          },
          { timeout: 8000 }
        );
      }
    });

    // Initial load: show all ATMs across Australia
    showATMs('all');

    // Fix map sizing after layout settles
    setTimeout(() => map.invalidateSize(), 200);
    setTimeout(() => map.invalidateSize(), 600);
  };
</script>
